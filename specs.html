<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Drink Specs</title>
  <style>
  body {
    font-family: Arial, sans-serif;
    margin: 10px;
    background: #f5f5f5;
  }
  h1 {
    text-align: center;
  }

  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); /* desktop default */
    gap: 15px;
    margin-top: 20px;
  }

  /* Phones: exactly 3 columns */
  @media (max-width: 1000px) {
    .grid {
      grid-template-columns: repeat(3, 1fr) !important;
    }
  }

  /* Very small phones: exactly 2 columns */
  @media (max-width: 400px) {
    .grid {
      grid-template-columns: repeat(2, 1fr) !important;
    }
  }

  .card {
    background: #fff;
    border: 1px solid #ccc;
    border-radius: 10px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    cursor: pointer;
    text-align: center;
    transition: transform 0.2s;
    position: relative;
    overflow: hidden;
    min-height: 220px;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 10px;
    word-wrap: break-word;
  }

  .card:hover {
    transform: scale(1.03);
  }

  .front, .back {
    position: absolute;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    padding: 10px;
    backface-visibility: hidden;
    transition: opacity 0.3s ease-in-out;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    word-break: break-word;
  }

  .front img {
    max-width: 100%;
    max-height: 120px;
    object-fit: contain;
    margin-bottom: 10px;
  }

  .front .title {
    font-weight: bold;
    font-size: 16px;
    white-space: normal;
  }

  .front.no-image {
    justify-content: center;
  }

.back {
  justify-content: center;   /* vertical center */
  align-items: center;       /* horizontal center */
  text-align: center;        /* text centered */
  padding: 15px;
  font-size: 14px;
  line-height: 1.4;
  white-space: pre-wrap;
  word-wrap: break-word;       /* break long words */
  overflow-wrap: break-word;   /* extra safety */
  box-sizing: border-box;      /* padding stays inside card */
  overflow-y: auto;          /* still scrolls if too long */
}


  .hidden {
    opacity: 0;
    pointer-events: none;
  }

  .visible {
    opacity: 1;
    pointer-events: auto;
  }
</style>

</head>
<body>
  <h1>Cocktail Specs</h1>

  <nav>
    <a href="index.html">Home</a>
  </nav>

  <div class="grid" id="cardsGrid"></div>

  <script>
    async function loadDrinks() {
      try {
        const res = await fetch("/specs.json");
        if (!res.ok) return;
        const drinks = await res.json();

        const grid = document.getElementById("cardsGrid");
        grid.innerHTML = "";

        Object.entries(drinks)
          .sort(([nameA], [nameB]) => nameA.localeCompare(nameB))
          .forEach(([name, drink]) => {
          const card = document.createElement("div");
          card.className = "card";

          // Front side
          const front = document.createElement("div");
          front.className = "front visible";
          if (drink.image) {
            const img = document.createElement("img");
            img.src = `Images/${drink.image}`;
            front.appendChild(img);
          }
          const title = document.createElement("div");
          title.textContent = name;
          title.style.fontWeight = "bold";
          title.style.fontSize = "16px";
          front.appendChild(title);

          // Back side
          const back = document.createElement("div");
          back.className = "back hidden";
          back.textContent = Object.entries(drink.ingredients)
            .map(([ing, meas]) => `${ing}: ${meas}`)
            .join("\n");

          card.appendChild(front);
          card.appendChild(back);

          let timeoutId;

          function flipToBack() {
            front.classList.replace("visible", "hidden");
            back.classList.replace("hidden", "visible");

            // auto revert after 2 minutes
            clearTimeout(timeoutId);
            timeoutId = setTimeout(flipToFront, 120000);
          }

          function flipToFront() {
            back.classList.replace("visible", "hidden");
            front.classList.replace("hidden", "visible");
            clearTimeout(timeoutId);
          }

          card.addEventListener("click", () => {
            if (front.classList.contains("visible")) {
              flipToBack();
            } else {
              flipToFront();
            }
          });

          grid.appendChild(card);
        });
      } catch (err) {
        console.error("Failed to load specs:", err);
      }
    }

    loadDrinks();
  </script>
</body>
</html>
